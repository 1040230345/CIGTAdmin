<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>广科闲置交易系统-后台</title>
    <script src="/static/vue.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="/static/index.css" />
    <link rel="stylesheet" href="/static/css/home.css">
    <!-- 引入组件库 -->
    <script src="/static/index.js"></script>
    <link rel="stylesheet" href="/static/animate.css">
</head>

<body>
<div id="app">
    <el-container>
        <el-aside width="12%">
            <!--            侧边导航-->
            <div class="navtitle">
                广科闲置交易系统
            </div>
            <el-menu default-active="1-1" class="el-menu-vertical-demo" @select="handleShow"
                     background-color="#545c64" text-color="#fff" active-text-color="#ffd04b">
                <el-submenu index="1">
                    <template slot="title">
                        <i class="el-icon-user-solid"></i>
                        <span>用户管理</span>
                    </template>
                    <el-menu-item-group>
                        <el-menu-item index="1-1">查看用户</el-menu-item>
                    </el-menu-item-group>
                    <el-menu-item-group title="----">
                        <el-menu-item index="1-2">增加用户</el-menu-item>
                    </el-menu-item-group>
                    <el-menu-item-group title="----">
                        <el-menu-item index="1-3">删除用户</el-menu-item>
                    </el-menu-item-group>
                </el-submenu>
                <el-submenu index="2">
                    <template slot="title">
                        <i class="el-icon-s-goods"></i>
                        <span>商品管理</span>
                    </template>
                    <el-menu-item-group>
                        <el-menu-item index="2-1">查看商品</el-menu-item>
                    </el-menu-item-group>
                    <el-menu-item-group title="----">
                        <el-menu-item index="2-2">增加商品</el-menu-item>
                    </el-menu-item-group>
                    <el-menu-item-group title="----">
                        <el-menu-item index="2-3">删除商品</el-menu-item>
                    </el-menu-item-group>
                </el-submenu>
                <el-submenu index="3">
                    <template slot="title">
                        <i class="el-icon-message-solid"></i>
                        <span>留言管理</span>
                    </template>
                    <el-menu-item-group>
                        <el-menu-item index="3-1">查看留言</el-menu-item>
                    </el-menu-item-group>
                    <el-menu-item-group title="----">
                        <el-menu-item index="3-2">删除留言</el-menu-item>
                    </el-menu-item-group>
                </el-submenu>
            </el-menu>
        </el-aside>
        <el-container>
            <el-header>
                <!--                头部导航-->
                <el-menu :default-active="activeIndex2" class="el-menu-demo" mode="horizontal"
                         @select="handleSelect" background-color="#24292E" text-color="#FFFFFF"
                         active-text-color="#ffd04b">
                    <el-submenu index="2">
                        <template slot="title">
                            个人中心
                        </template>
                        <el-menu-item index="2-1" style="text-align: center">欢迎进入闲置交易系统后台！</el-menu-item>
                        <el-menu-item index="2-3" @click="sendLoginOut" style="text-align: center">退出登录
                        </el-menu-item>
                    </el-submenu>
                </el-menu>
            </el-header>
            <el-main>
                <!--                查看用户-->
                <div class="editUser" v-if="cardVisible.userShow">
                    <!--                        对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkUserdialogVisible" width="30%" center>
                        <ul class="checkUl">
                            <li>id：{{ checkUserData.id }}</li>
                            <li>用户名：{{ checkUserData.name }}</li>
                            <li class="ycenter">头像：<el-avatar :size="30" :src="checkUserData.image" fit="cover">
                            </el-avatar>
                            </li>
                            <li>密码：{{ checkUserData.password }}</li>
                            <li>地址：{{ checkUserData.address }}</li>
                            <li>性别：{{ checkUserData.sex }}</li>
                            <li>电话：{{ checkUserData.phone }}</li>
                            <li>状态：{{ checkUserData.information_state }}</li>
                            <li>个性签名：{{ checkUserData.autograph }}</li>
                            <li>创建时间：{{ checkUserData.created_at }}</li>
                            <li>更新时间：{{ checkUserData.updated_at }}</li>
                            <li>真实姓名：{{ checkUserData.real_name }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="checkUserdialogVisible = false">确 定</el-button>
                            </span>
                    </el-dialog>
                    <!--                    编辑-->
                    <el-dialog title="编辑" :visible.sync="editUserdialogVisible" width="30%" center>
                        <el-form label-width="80px" :model="editUserData">
                            <el-form-item label="用户名" :rules="[
                              { required: true, message: '用户名不能为空',trigger:['blur','change']}
                            ]" prop="name">
                                <el-input type="primary" size="small" v-model="editUserData.name"></el-input>
                            </el-form-item>
                            <el-form-item label="头像">
                                <el-input type="primary" size="small" v-model="editUserData.image"></el-input>
                            </el-form-item>
                            <el-form-item label="密码" :rules="[
                              { required: true, message: '密码不能为空',trigger:['blur','change']}
                            ]" prop="password">
                                <el-input type="primary" size="small" v-model="editUserData.password"></el-input>
                            </el-form-item>
                            <el-form-item label="地址">
                                <el-input type="primary" size="small" v-model="editUserData.address"></el-input>
                            </el-form-item>
                            <el-form-item label="性别">
                                <el-radio v-model="editUserData.sex" label="男">男</el-radio>
                                <el-radio v-model="editUserData.sex" label="女">女</el-radio>
                            </el-form-item>
                            <el-form-item label="电话">
                                <el-input type="primary" size="small" v-model="editUserData.phone"></el-input>
                            </el-form-item>
                            <el-form-item label="状态">
                                <el-switch
                                        v-model="editUserData.information_state"
                                        active-color="#13ce66"
                                        inactive-color="#ff4949">
                                </el-switch>
                            </el-form-item>
                            <el-form-item label="个性签名">
                                <el-input type="primary" size="small" v-model="editUserData.autograph"></el-input>
                            </el-form-item>
                            <el-form-item label="真实姓名">
                                <el-input type="primary" size="small" v-model="editUserData.real_name"></el-input>
                            </el-form-item>
                        </el-form>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="sendEditUser">修 改</el-button>
                                <el-button type="" @click="editUserdialogVisible = false">放弃修改</el-button>
                            </span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix" style="display: flex;justify-content: space-between">
                            <div style="line-height: 40px" class="tableTitle">查看用户</div>
                            <div style="width: 30%;">
                                <label for="userSearch" style="font-style: normal;font-size: 14px;">搜索：</label>
                                <el-input id="userSearch" class="inline-input" v-model="userSearch_c"
                                          placeholder="请输入搜索用户名" @keyup.enter.native="searchUser(userSearch_c)" clearable
                                          style="width: 60%;"></el-input>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <el-table v-loading="userLoading" :data="userData" style="width: 100%"
                                      :row-class-name="tableRowClassName" fit>
                                <el-table-column prop="id" label="ID" width="50"></el-table-column>
                                <el-table-column prop="name" label="用户名" width="100"></el-table-column>
                                <el-table-column prop="image" label="头像" width="100">
                                    <template slot-scope="scope">
                                        <el-avatar :size="50" :src="scope.row.image" fit="cover"></el-avatar>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="password" label="密码" width="100"></el-table-column>
                                <el-table-column prop="address" label="地址"></el-table-column>
                                <el-table-column prop="sex" label="性别" width="50"></el-table-column>
                                <el-table-column prop="phone" label="电话"></el-table-column>
                                <el-table-column prop="information_state" label="状态" width="50"></el-table-column>
                                <el-table-column prop="autograph" label="个性签名"></el-table-column>
                                <el-table-column prop="created_at" label="创建时间" width="175"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="175"></el-table-column>
                                <el-table-column prop="real_name" label="真实姓名"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="175">
                                    <template slot-scope="scope">
                                        <el-button @click="checkUser(scope.row)" type="success" size="mini">查看</el-button>
                                        <el-button @click="editUser(scope.row)" type="warning" size="mini">修改
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <div class="xcenter">
                            <el-pagination background layout="prev, pager, next" :total="totalPage"
                                           @current-change="findUserPage" v-if="paginationShow" :current-page="currentPage_cu">
                            </el-pagination>
                        </div>
                    </el-card>
                </div>
                <!--                添加用户-->
                <div class="editUser" v-if="cardVisible.addUserShow">
                    <el-card>
                        <div slot="header" class="clearfix header">
                            <div class="tableTitle">添加用户</div>
                        </div>
                        <div class="addUserForm">
                            <el-form :model="addUserFormData" label-width="80px">
                                <el-form-item label="用户名" :rules="[
                              { required: true, message: '用户名不能为空',trigger:['blur']}
                            ]" prop="name">
                                    <el-input type="primary" size="large" placeholder="请输入您的姓名"
                                              v-model="addUserFormData.name"></el-input>
                                </el-form-item>
                                <el-form-item label="头像">
                                    <!--                                    <el-input type="primary" size="large" placeholder="请输入您的头像" v-model=""></el-input>-->
                                    <el-upload class="avatar-uploader" action="/upGoodsImage"
                                               :show-file-list="false" :auto-upload="true" name="fileName"
                                               :data="userImageData" :on-success="uhandleAvatarSuccess"
                                               :before-upload="ubeforeAvatarUpload">
                                        <img v-if="addUserFormData.image" :src="addUserFormData.image"
                                             class="avatar">
                                        <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                                    </el-upload>
                                </el-form-item>
                                <el-form-item label="密码" :rules="[
                              { required: true, message: '密码不能为空',trigger:['blur']}
                            ]" prop="password">
                                    <el-input type="primary" size="large" placeholder="请输入您的密码"
                                              v-model="addUserFormData.password"></el-input>
                                </el-form-item>
                                <el-form-item label="地址">
                                    <el-input type="primary" size="large" placeholder="请输入您的地址"
                                              v-model="addUserFormData.address"></el-input>
                                </el-form-item>
                                <el-form-item label="性别">
                                    <!--                                    <el-input type="primary" size="large" placeholder="请输入您的性别" v-model="addUserFormData.sex"></el-input>-->
                                    <el-radio v-model="addUserFormData.sex" label="男">男</el-radio>
                                    <el-radio v-model="addUserFormData.sex" label="女">女</el-radio>
                                </el-form-item>
                                <el-form-item label="电话">
                                    <el-input type="primary" size="large" placeholder="请输入您的电话"
                                              v-model="addUserFormData.phone"></el-input>
                                </el-form-item>
                                <el-form-item label="状态">
                                    <el-switch v-model="stateSwitch" active-color="#13ce66"
                                               inactive-color="#ff4949">
                                    </el-switch>
                                </el-form-item>
                                <el-form-item label="个性签名">
                                    <el-input type="primary" size="large" placeholder="请输入您的个性签名"
                                              v-model="addUserFormData.autograph"></el-input>
                                </el-form-item>
                                <el-form-item label="真实姓名">
                                    <el-input type="primary" size="large" placeholder="请输入您的真实姓名"
                                              v-model="addUserFormData.real_name"></el-input>
                                </el-form-item>
                                <div class="xcenter">
                                    <el-button type="primary" @click="sendAddUser">提交</el-button>
                                </div>
                            </el-form>
                        </div>
                    </el-card>
                </div>
                <!--                删除用户-->
                <div class="editUser" v-if="cardVisible.deleteUserShow">
                    <!--                    对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkUserdialogVisible" width="30%" center>
                        <ul class="checkUl">
                            <li>id：{{ checkUserData.id }}</li>
                            <li>用户名：{{ checkUserData.name }}</li>
                            <li class="ycenter">头像：<el-avatar :size="30" :src="checkUserData.image" fit="cover">
                            </el-avatar>
                            </li>
                            <li>密码：{{ checkUserData.password }}</li>
                            <li>地址：{{ checkUserData.address }}</li>
                            <li>性别：{{ checkUserData.sex }}</li>
                            <li>电话：{{ checkUserData.phone }}</li>
                            <li>状态：{{ checkUserData.information_state }}</li>
                            <li>个性签名：{{ checkUserData.autograph }}</li>
                            <li>创建时间：{{ checkUserData.created_at }}</li>
                            <li>更新时间：{{ checkUserData.updated_at }}</li>
                            <li>真实姓名：{{ checkUserData.real_name }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="checkUserdialogVisible = false">确 定</el-button>
                            </span>
                    </el-dialog>
                    <!--                    删除-->
                    <el-dialog title="确认删除" :visible.sync="deleteUserdialogVisible" width="30%" center>
                        <p>您正在删除表格数据！</p>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="sendDeleteUser">确认</el-button>
                                <el-button type="" @click="deleteUserdialogVisible = false">取消</el-button>
                            </span>
                    </el-dialog>
                    <!--                    表格主体-->
                    <el-card>
                        <div slot="header" class="clearfix header"
                             style="display: flex;justify-content: space-between">
                            <div class="tableTitle">删除用户</div>
                            <div style="width: 30%;">
                                <label for="userSearch" style="font-style: normal;font-size: 14px;">搜索：</label>
                                <el-input id="userSearch" class="inline-input" v-model="userSearch_d"
                                          placeholder="请输入搜索用户名" @keyup.enter.native="searchUser(userSearch_d)" clearable
                                          style="width: 60%;"></el-input>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <el-table :data="userData" style="width: 100%" :row-class-name="tableRowClassName"
                                      v-loading="userLoading">
                                <el-table-column prop="id" label="ID"></el-table-column>
                                <el-table-column prop="name" label="用户名"></el-table-column>
                                <el-table-column prop="image" label="头像">
                                    <template slot-scope="scope">
                                        <el-avatar :size="50" :src="scope.row.image" fit="cover"></el-avatar>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="password" label="密码"></el-table-column>
                                <el-table-column prop="address" label="地址"></el-table-column>
                                <el-table-column prop="sex" label="性别"></el-table-column>
                                <el-table-column prop="phone" label="电话"></el-table-column>
                                <el-table-column prop="information_state" label="状态"></el-table-column>
                                <el-table-column prop="autograph" label="个性签名"></el-table-column>
                                <el-table-column prop="created_at" label="创建时间" width="170px"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="170px"></el-table-column>
                                <el-table-column prop="real_name" label="真实姓名"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="175">
                                    <template slot-scope="scope">
                                        <el-button @click="checkUser(scope.row)" type="success" size="mini">查看</el-button>
                                        <el-button @click="deleteUser(scope.row)" type="danger" size="mini">删除
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <div class="xcenter">
                            <el-pagination background layout="prev, pager, next" :total="totalPage"
                                           @current-change="deleteUserPage" v-if="paginationShow"
                                           :current-page="currentPage_du"></el-pagination>
                        </div>
                    </el-card>
                </div>

                <!--                查看商品-->
                <div class="editUser" v-if="cardVisible.goodsShow">
                    <!--                        对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkGoodsDialogVisible" width="30%" center>
                        <ul class="checkUl">
                            <li>id：{{ checkGoodsData.id }}</li>
                            <li>商品名称：{{ checkGoodsData.name }}</li>
                            <li>商品价格：{{ checkGoodsData.price }}</li>
                            <li class="ycenter">商品图片：<el-image style="width: 30px; height: 30px"
                                                               :src="checkGoodsData.images" fit="cover">
                            </el-image>
                            </li>
                            <li>创建时间：{{ checkGoodsData.time }}</li>
                            <li>更新时间：{{ checkGoodsData.updated_at }}</li>
                            <li>用户id：{{ checkGoodsData.user_id }}</li>
                            <li>商品数量：{{ checkGoodsData.num }}</li>
                            <li>商品分类：{{ checkGoodsData.showCategory }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="checkGoodsDialogVisible = false">确 定</el-button>
                            </span>
                    </el-dialog>
                    <!--                    编辑-->
                    <el-dialog title="编辑" :visible.sync="editGoodsDialogVisible" width="30%" center>
                        <el-form label-width="80px">
                            <el-form-item label="商品名称">
                                <el-input type="primary" size="small" v-model="editGoodsData.name"></el-input>
                            </el-form-item>
                            <el-form-item label="价格">
                                <el-input type="primary" size="small" v-model="editGoodsData.price"></el-input>
                            </el-form-item>
                            <el-form-item label="图片">
                                <el-input type="primary" size="small" v-model="editGoodsData.images"></el-input>
                            </el-form-item>
                            <el-form-item label="数量">
                                <el-input type="primary" size="small" v-model="editGoodsData.num"></el-input>
                            </el-form-item>
                            <el-form-item label="类别">
                                <!--                                <el-input type="primary" size="small" v-model="editGoodsData.category"></el-input>-->
                                <el-select v-model="editGoodsData.category" clearable placeholder="请选择">
                                    <el-option v-for="item in options" :key="item.value" :label="item.label"
                                               :value="item.value">
                                    </el-option>
                                </el-select>
                            </el-form-item>
                        </el-form>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="sendEditGoods">修 改</el-button>
                                <el-button type="" @click="editGoodsDialogVisible = false">放弃修改</el-button>
                            </span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix" style="display: flex;justify-content: space-between">
                            <div style="line-height: 40px" class="tableTitle">查看商品</div>
                            <div style="width: 30%;">
                                <label for="goodSearch" style="font-style: normal;font-size: 14px;">搜索：</label>
                                <el-input id="goodSearch" class="inline-input" v-model="goodSearch_c"
                                          placeholder="请输入搜索商品名" @keyup.enter.native="searchGood(goodSearch_c)"
                                          style="width: 60%;" clearable></el-input>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <el-table v-loading="goodsLoading" :data="goodsData" style="width: 100%"
                                      :row-class-name="tableRowClassName">
                                <el-table-column prop="id" label="ID" width="50"></el-table-column>
                                <el-table-column prop="name" label="名称" width="150"></el-table-column>
                                <el-table-column prop="price" label="价格" width="80"></el-table-column>
                                <el-table-column prop="images" label="图片" width="100">
                                    <template slot-scope="scope">
                                        <el-image style="width: 100px; height: 100px" :src="scope.row.images"
                                                  fit="cover">
                                        </el-image>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="time" label="时间" width="175"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="175"></el-table-column>
                                <el-table-column prop="user_id" label="用户id" width="80"></el-table-column>
                                <el-table-column prop="num" label="数量" width="60"></el-table-column>
                                <el-table-column prop="showCategory" label="类别" width="100"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="175">
                                    <template slot-scope="scope">
                                        <el-button @click="checkGoods(scope.row)" type="success" size="mini">查看</el-button>
                                        <el-button @click="editGoods(scope.row)" type="warning" size="mini">修改
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <div class="xcenter">
                            <el-pagination background layout="prev, pager, next" :total="totalPage"
                                           @current-change="findGoodPage" v-if="paginationShow"></el-pagination>
                        </div>
                    </el-card>
                </div>
                <!--                添加商品-->
                <div class="editUser" v-if="cardVisible.addGoodsShow">
                    <el-card>
                        <div slot="header" class="clearfix header">
                            <div class="tableTitle">添加商品</div>
                        </div>
                        <div class="addGoodsForm">
                            <el-form :model="addGoodsFormData" label-width="80px">
                                <el-form-item label="用户id">
                                    <el-input type="primary" size="large" placeholder="请输入发布此商品的用户id"
                                              v-model="addGoodsFormData.user_id"></el-input>
                                </el-form-item>
                                <el-form-item label="商品名称">
                                    <el-input type="primary" size="large" placeholder="请输入您要发布商品名称"
                                              v-model="addGoodsFormData.name"></el-input>
                                </el-form-item>
                                <el-form-item label="价格">
                                    <el-input type="primary" size="large" placeholder="请输入您的商品价格"
                                              v-model="addGoodsFormData.price"></el-input>
                                </el-form-item>
                                <el-form-item label="图片">
                                    <el-upload class="avatar-uploader" action="/upGoodsImage"
                                               :show-file-list="false" :auto-upload="true" name="fileName"
                                               :on-success="ghandleAvatarSuccess" :before-upload="gbeforeAvatarUpload"
                                               :data="goodImageData">
                                        <img v-if="addGoodsFormData.images" :src="addGoodsFormData.images"
                                             class="avatar">
                                        <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                                    </el-upload>
                                </el-form-item>
                                <el-form-item label="数量">
                                    <el-input type="primary" size="large" placeholder="请输入您的商品数量"
                                              v-model="addGoodsFormData.num"></el-input>
                                </el-form-item>
                                <el-form-item label="类别">
                                    <!--                                    <el-input type="primary" size="large" placeholder="请输入您的商品类别" v-model="addGoodsFormData.category"></el-input>-->
                                    <el-select v-model="addGoodsFormData.category" clearable placeholder="请选择">
                                        <el-option v-for="item in options" :key="item.value" :label="item.label"
                                                   :value="item.value">
                                        </el-option>
                                    </el-select>
                                </el-form-item>
                                <div class="xcenter">
                                    <el-button type="primary" @click="sendAddGoods">提交</el-button>
                                </div>
                            </el-form>
                        </div>
                    </el-card>
                </div>
                <!--                删除商品-->
                <div class="editUser" v-if="cardVisible.deleteGoodsShow">
                    <!--                    对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkGoodsDialogVisible" width="30%" center>
                        <ul class="checkUl">
                            <li>id：{{ checkGoodsData.id }}</li>
                            <li>商品名称：{{ checkGoodsData.name }}</li>
                            <li>商品价格：{{ checkGoodsData.price }}</li>
                            <li class="ycenter">商品图片：<el-image style="width: 30px; height: 30px"
                                                               :src="checkGoodsData.images" fit="cover">
                            </el-image>
                            </li>
                            <li>创建时间：{{ checkGoodsData.time }}</li>
                            <li>更新时间：{{ checkGoodsData.updated_at }}</li>
                            <li>用户id：{{ checkGoodsData.user_id }}</li>
                            <li>商品数量：{{ checkGoodsData.num }}</li>
                            <li>商品分类：{{ checkGoodsData.showCategory }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="checkGoodsDialogVisible = false">确 定</el-button>
                            </span>
                    </el-dialog>
                    <!--                    删除-->
                    <el-dialog title="确认删除" :visible.sync="deleteGoodsDialogVisible" width="30%" center>
                        <p>您正在删除表格数据！</p>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="sendDeleteGoods">确认</el-button>
                                <el-button type="" @click="deleteGoodsDialogVisible = false">取消</el-button>
                            </span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix header"
                             style="display: flex;justify-content: space-between">
                            <div class="tableTitle" style="line-height: 40px;">删除商品</div>
                            <div style="width: 30%;">
                                <label for="goodSearch" style="font-style: normal;font-size: 14px;">搜索：</label>
                                <el-input id="goodSearch" class="inline-input" v-model="goodSearch_d"
                                          placeholder="请输入搜索商品名" @keyup.enter.native="searchGood(goodSearch_d)"
                                          style="width: 60%;" clearable></el-input>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <el-table :data="goodsData" :row-class-name="tableRowClassName" style="width: 100%"
                                      v-loading="goodsLoading">
                                <el-table-column prop="id" label="ID" width="50"></el-table-column>
                                <el-table-column prop="name" label="名称" width="150"></el-table-column>
                                <el-table-column prop="price" label="价格" width="80"></el-table-column>
                                <el-table-column prop="images" label="图片" width="100">
                                    <template slot-scope="scope">
                                        <el-image style="width: 100px; height: 100px" :src="scope.row.images"
                                                  fit="cover">
                                        </el-image>
                                    </template>
                                </el-table-column>
                                <el-table-column prop="time" label="时间" width="175"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="175"></el-table-column>
                                <el-table-column prop="user_id" label="用户id" width="80"></el-table-column>
                                <el-table-column prop="num" label="数量" width="60"></el-table-column>
                                <el-table-column prop="showCategory" label="类别" width="100"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="175">
                                    <template slot-scope="scope">
                                        <el-button @click="checkGoods(scope.row)" type="success" size="mini">查看</el-button>
                                        <el-button @click="deleteGoods(scope.row)" type="danger" size="mini">删除
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <div class="xcenter">
                            <el-pagination background layout="prev, pager, next" :total="totalPage"
                                           @current-change="deleteGoodPage" v-if="paginationShow"></el-pagination>
                        </div>
                    </el-card>
                </div>

                <!--                查看评论-->
                <div class="editUser" v-if="cardVisible.commentsShow">
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkCommentsDialogVisible" width="30%" center>
                        <ul class="checkUl">
                            <li><span class="lititle">id:</span><span class="licontent">{{checkCommentsData.id}}</span></li>
                            <li><span class="lititle">goods_name:</span><span class="licontent">{{checkCommentsData.goods_name}}</span></li>
                            <li><span class="lititle">content:</span><span class="licontent">{{checkCommentsData.content}}</span></li>
                        </ul>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="checkCommentsDialogVisible = false">确 定</el-button>
                            </span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix header"
                             style="display: flex;justify-content: space-between">
                            <div class="tableTitle" style="line-height: 40px;">查看留言</div>
                            <div style="width: 30%;">
                                <label for="goodSearch" style="font-style: normal;font-size: 14px;">搜索：</label>
                                <el-input id="goodSearch" class="inline-input" v-model="commentSearch_c"
                                          placeholder="请输入搜索评论内容" @keyup.enter.native="searchComment(commentSearch_c)"
                                          style="width: 60%;" clearable></el-input>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <el-table v-loading="userLoading" :data="commentsData" style="width: 100%"
                                      :row-class-name="tableRowClassName"
                                      :tree-props="{children: 'children', hasChildren: 'hasChildren'}" row-key="id">
                                <el-table-column prop="id" label="ID" width="100"></el-table-column>
                                <el-table-column prop="goods_name" label="商品" width="150"></el-table-column>
                                <el-table-column prop="user_name" label="评论用户" width="80"></el-table-column>
                                <el-table-column prop="content" label="评论内容" width=""></el-table-column>
                                <el-table-column fixed="right" label="操作" width="175">
                                    <template slot-scope="scope">
                                        <el-button @click="checkComments(scope.row)" type="success" size="mini">查看
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <!--                        <div class="xcenter">-->
                        <!--                            <el-pagination background layout="prev, pager, next" :total="totalPage" @current-change="findGoodPage"></el-pagination>-->
                        <!--                        </div>-->
                    </el-card>
                </div>
                <!--                删除评论-->
                <div class="editUser" v-if="cardVisible.deleteCommentsShow">
                    <el-dialog title="确认删除" :visible.sync="deleteCommentsDialogVisible" width="30%" center>
                        <p>您正在删除表格数据！</p>
                        <span slot="footer" class="dialog-footer">
                                <el-button type="primary" @click="sendDeleteComments">确认</el-button>
                                <el-button type="" @click="deleteCommentsDialogVisible = false">取消</el-button>
                            </span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix header" style="display: flex;justify-content: space-between">
                            <div class="tableTitle" style="line-height: 40px;">删除评论</div>
                            <div style="width: 30%;">
                                <label for="goodSearch" style="font-style: normal;font-size: 14px;">搜索：</label>
                                <el-input id="goodSearch" class="inline-input" v-model="commentSearch_d"
                                          placeholder="请输入搜索评论内容" @keyup.enter.native="searchComment(commentSearch_d)"
                                          style="width: 60%;" clearable></el-input>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <el-table v-loading="userLoading" :data="commentsData" style="width: 100%"
                                      :row-class-name="tableRowClassName"
                                      :tree-props="{children: 'children', hasChildren: 'hasChildren'}" row-key="id">
                                <el-table-column prop="id" label="ID" width="100"></el-table-column>
                                <el-table-column prop="goods_name" label="商品" width="150"></el-table-column>
                                <el-table-column prop="user_name" label="评论用户" width="80"></el-table-column>
                                <el-table-column prop="content" label="评论内容" width=""></el-table-column>
                                <el-table-column fixed="right" label="操作" width="175">
                                    <template slot-scope="scope">
                                        <el-button @click="deleteComments(scope.row)" type="danger" size="mini">删除
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <!--                        <div class="xcenter">-->
                        <!--                            <el-pagination background layout="prev, pager, next" :total="totalPage" @current-change="deleteGoodPage"></el-pagination>-->
                        <!--                        </div>-->
                    </el-card>
                </div>

            </el-main>
            <el-footer>
                ©
                <i style="font-weight: 700; font-style: normal;color: #3C8DBC">广东科技学院</i>
                2019
            </el-footer>
        </el-container>
    </el-container>
</div>
</body>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            paginationShow: true,
            totalPage: 0,
            userSearch_c: '', //查看用户页面的搜索内容
            userSearch_d: '', //删除用户页面的搜索内容
            goodSearch_c: '', //查看商品页面的搜索内容
            goodSearch_d: '', //查看商品页面的搜索内容
            commentSearch_c: '', //查看评论页面的搜索内容
            commentSearch_d: '', //查看评论页面的搜索内容
            options: [{
                value: '1',
                label: '服装衣物'
            }, {
                value: '2',
                label: '书籍课本'
            }, {
                value: '3',
                label: '电子产品'
            }, {
                value: '4',
                label: '实用家具'
            }, {
                value: '5',
                label: '零食饮品'
            }, {
                value: '6',
                label: '爱情文学'
            }, {
                value: '0',
                label: '其他物品'
            }],
            commentsData: [],
            goodImageData: {
                type: 2
            },
            userImageData: {
                type: 1
            },
            iscollapse: false,
            mode: 'vertical',
            activeIndex2: '1',
            checkUserdialogVisible: false,
            editUserdialogVisible: false,
            deleteUserdialogVisible: false,

            deleteCommentsDialogVisible: false,
            deleteCommentsID: '', //暂时存放要删除的评论id
            checkGoodsDialogVisible: false,
            editGoodsDialogVisible: false,
            deleteGoodsDialogVisible: false,

            checkCommentsDialogVisible:false,
            checkCommentsData:{},
            cardVisible: {
                userShow: false,
                addUserShow: false,
                deleteUserShow: false,
                goodsShow: false,
                addGoodsShow: false,
                deleteGoodsShow: false,
                commentsShow: false,
                deleteCommentsShow: false
            },
            // user
            userLoading: true,
            //暂时存放删除id
            deleteID: '',
            checkUserData: {
                id: '',
                name: '',
                image: '',
                password: '',
                address: '',
                sex: '',
                phone: '',
                information_state: '',
                autograph: '',
                created_at: '',
                updated_at: '',
                real_name: ''
            },
            editUserData: {
                id: '',
                name: '',
                image: '',
                password: '',
                address: '',
                sex: '',
                phone: '',
                information_state: '',
                autograph: '',
                created_at: '',
                updated_at: '',
                real_name: ''
            },
            userData: [],
            addUserFormData: {
                name: '',
                image: '',
                password: '',
                address: '',
                sex: '男',
                phone: '',
                information_state: 0,
                autograph: '',
                real_name: ''
            },
            stateSwitch: true,
            // 商品
            goodsLoading: true,
            //暂时存放删除id
            deleteGoodsID: '',
            checkGoodsData: {
                id: '',
                name: '',
                price: '',
                images: '',
                time: '',
                updated_at: '',
                user_id: '',
                num: '',
                category: ''
            },
            editGoodsData: {
                id: '',
                name: '',
                price: '',
                images: '',
                time: '',
                updated_at: '',
                user_id: '',
                num: '',
                category: ''
            },
            goodsData: [

            ],
            // showCategory:'',
            addGoodsFormData: {
                name: '',
                price: '',
                images: '',
                user_id: '',
                num: '',
                category: ''
            },
            currentPage_cu: 1, //查看用户暂存第几页
            currentPage_du: 1, //删除用户暂存第几页
            currentPage_cg: 1, //查看用户暂存第几页
            currentPage_dg: 1, //删除用户暂存第几页
        },
        watch: {
            'cardVisible.userShow': function (e) {
                if (e) {
                    this.refreshUser()
                }
            },
            'cardVisible.deleteUserShow': function (e) {
                if (e) {
                    this.refreshUser()
                }
            },
            'cardVisible.goodsShow': function (e) {
                if (e) {
                    this.refreshGoods()
                }
            },
            'cardVisible.deleteGoodsShow': function (e) {
                if (e) {
                    this.refreshGoods()
                }
            },
            'cardVisible.commentsShow': function (e) {
                if (e) {
                    this.refreshComment()
                }
            },
            'cardVisible.deleteCommentsShow': function (e) {
                if (e) {
                    this.refreshComment()
                }
            },
            stateSwitch: function (e) {
                console.log(e)
                if (e) {
                    this.addUserFormData.information_state = 0;
                } else {
                    this.addUserFormData.information_state = 1;
                }
            },
            userSearch_c: function (e) {
                if (e == '') {
                    this.refreshUser(this.currentPage_cu);
                }
            },
            userSearch_d: function (e) {
                if (e == '') {
                    this.refreshUser(this.currentPage_du);
                }
            },
            goodSearch_c: function (e) {
                if (e == '') {
                    this.refreshGoods(this.currentPage_cg)
                }
            },
            goodSearch_d: function (e) {
                if (e == '') {
                    this.refreshComment(this.currentPage_dg)
                }
            },
            // commentSearch_c
            commentSearch_c: function (e) {
                if (e == '') {
                    this.refreshComment()
                }
            },
            commentSearch_d: function (e) {
                if (e == '') {
                    this.refreshComment()
                }
            }
        },
        methods: {
            deleteGoodPage(e) {
                this.currentPage_cg = e;
                this.refreshGoods(this.currentPage_cg);
            },
            findGoodPage(e) {
                this.currentPage_dg = e;
                this.refreshGoods(this.currentPage_dg);
            },
            deleteUserPage(e) {
                this.currentPage_du = e;
                this.refreshUser(this.currentPage_du);
            },
            findUserPage(e) {
                this.currentPage_cu = e;
                this.refreshUser(this.currentPage_cu);
            },
            ghandleAvatarSuccess(res, file) {
                console.log(res);
                if (res.code == 0) {
                    console.log(res.msg)
                    this.addGoodsFormData.images = res.msg;
                }
            }, //上传成功
            gbeforeAvatarUpload() {
                // console.log("上传前")
            }, //图片上传前
            uhandleAvatarSuccess(res, file) {
                console.log(res);
                if (res.code == 0) {
                    console.log(res.msg)
                    this.addUserFormData.image = res.msg;
                }
            }, //上传成功
            ubeforeAvatarUpload() {
                // console.log("上传前")
            }, //图片上传前
            tableRowClassName({
                                  row,
                                  rowIndex
                              }) {
                if (rowIndex % 2 != 0 && rowIndex % 4 === 1) {
                    return 'warning-row';
                } else if (rowIndex % 2 != 0) {
                    return 'success-row';
                }
            },
            handleSelect(key, keyPath) {},
            handleShow(key, keyPath) {
                // console.log(key)
                for (let i in this.cardVisible) {
                    this.cardVisible[i] = false;
                }
                switch (key) {
                    case '1-1':
                        setTimeout(() => {
                            this.cardVisible.userShow = true;
                        }, 200);
                        break;
                    case '1-2':
                        this.cardVisible.addUserShow = true;
                        break;
                    case '1-3':
                        setTimeout(() => {
                            this.cardVisible.deleteUserShow = true;
                        }, 200);
                        break;
                    case '2-1':
                        setTimeout(() => {
                            this.cardVisible.goodsShow = true;
                        }, 200);
                        break;
                    case '2-2':
                        this.cardVisible.addGoodsShow = true;
                        break;
                    case '2-3':
                        setTimeout(() => {
                            this.cardVisible.deleteGoodsShow = true;
                        }, 200);
                        break;
                    case '3-1':
                        setTimeout(() => {
                            this.cardVisible.commentsShow = true;
                        }, 200);
                        break;
                    case '3-2':
                        setTimeout(() => {
                            this.cardVisible.deleteCommentsShow = true;
                        }, 200);
                        break;
                }
            },
            //退出登录
            sendLoginOut() {
                window.location.replace('/loginout');
            },
            // 用户
            // 更新用户数据
            refreshUser(page) {
                this.userLoading = true;
                this.userData = [];
                if (typeof page != "number") {
                    page = 1;
                    this.currentPage_du = 1;
                    this.currentPage_cu = 1;
                }
                $.ajax({
                    url: '/api/findAllUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        currPage: page,
                        pageSize: 10,
                    }
                })
                    .done(data => {
                        // console.log(data);
                        this.totalPage = data.TotalPage * 10;
                        this.userData = data.findAllUser;
                        this.userLoading = false;
                        this.paginationShow = true;
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            checkUser(obj) {
                this.checkUserdialogVisible = true;
                this.checkUserData.id = obj.id;
                this.checkUserData.name = obj.name;
                this.checkUserData.image = obj.image;
                this.checkUserData.password = obj.password;
                this.checkUserData.address = obj.address;
                this.checkUserData.sex = obj.sex;
                this.checkUserData.phone = obj.phone;
                this.checkUserData.information_state = obj.information_state;
                this.checkUserData.autograph = obj.autograph;
                this.checkUserData.created_at = obj.created_at;
                this.checkUserData.updated_at = obj.updated_at;
                this.checkUserData.real_name = obj.real_name;
            }, //查看用户详情对话框
            sendAddUser() {
                // console.log(this.addUserFormData)
                $.ajax({
                    url: '/api/insertUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        name: this.addUserFormData.name,
                        image: this.addUserFormData.image,
                        password: this.addUserFormData.password,
                        address: this.addUserFormData.address,
                        sex: this.addUserFormData.sex,
                        phone: this.addUserFormData.phone,
                        information_state: this.addUserFormData.information_state,
                        autograph: this.addUserFormData.autograph,
                        real_name: this.addUserFormData.real_name
                    }
                })
                    .done(data => {
                        this.$notify({
                            title: '成功',
                            message: '添加成功',
                            type: 'success'
                        });
                        this.handleShow('1-2')
                        for (let i in this.addUserFormData) {
                            this.addUserFormData[i] = '';
                        }
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            editUser(obj) {
                this.$message({
                    message: '您正在修改数据，谨慎行事',
                    type: 'warning'
                });
                this.editUserdialogVisible = true;
                this.editUserData.id = obj.id;
                this.editUserData.name = obj.name;
                this.editUserData.image = obj.image;
                this.editUserData.password = obj.password;
                this.editUserData.address = obj.address;
                this.editUserData.sex = obj.sex;
                this.editUserData.phone = obj.phone;
                // this.editUserData.information_state = obj.information_state;
                if (obj.information_state == 0) {
                    this.editUserData.information_state = true;
                }else {
                    this.editUserData.information_state = false;
                }
                this.editUserData.autograph = obj.autograph;
                this.editUserData.created_at = obj.created_at;
                this.editUserData.updated_at = obj.updated_at;
                this.editUserData.real_name = obj.real_name;
            }, //查看编辑用户对话框
            sendEditUser() {
                let information_state;
                this.editUserdialogVisible = false;
                if (this.editUserData.information_state == true){
                    information_state = 0;
                }else {
                    information_state = 0;
                }
                $.ajax({
                    url: '/api/updateUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id: this.editUserData.id,
                        name: this.editUserData.name,
                        image: this.editUserData.image,
                        password: this.editUserData.password,
                        address: this.editUserData.address,
                        sex: this.editUserData.sex,
                        phone: this.editUserData.phone,
                        information_state: information_state,
                        autograph: this.editUserData.autograph,
                        real_name: this.editUserData.real_name
                    }
                })
                    .done((data) => {
                        // console.log(data)
                        this.$notify({
                            title: '成功',
                            message: '修改成功',
                            type: 'success'
                        });
                        console.log(this.currentPage_cu)
                        this.refreshUser(this.currentPage_cu);
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            deleteUser(obj) {
                this.deleteUserdialogVisible = true;
                this.deleteID = obj.id;
            }, //查看删除用户表格
            sendDeleteUser() {
                $.ajax({
                    url: '/api/delectUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id: this.deleteID
                    }
                })
                    .done((data) => {
                        // console.log(data);
                        this.deleteUserdialogVisible = false;
                        this.refreshUser(this.currentPage_du)
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            // 商品
            refreshGoods(page) {
                this.goodSearch = '';
                this.goodsLoading = true;
                this.goodsData = [];
                if (typeof page != "number") {
                    page = 1;
                    this.currentPage_dg = 1;
                    this.currentPage_cg = 1;
                }
                $.ajax({
                    url: '/api/findAllGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        currPage: page,
                        pageSize: 10,
                    }
                })
                    .done(data => {
                        this.totalPage = data.TotalPage * 10;
                        this.goodsData = data.findAllGoods;
                        for (let i in this.goodsData) {
                            switch (this.goodsData[i].category) {
                                case '0':
                                    this.goodsData[i].showCategory = "其他物品";
                                    break;
                                case '1':
                                    this.goodsData[i].showCategory = "服装衣物";
                                    break;
                                case '2':
                                    this.goodsData[i].showCategory = "书籍课本";
                                    break;
                                case '3':
                                    this.goodsData[i].showCategory = "电子产品";
                                    break;
                                case '4':
                                    this.goodsData[i].showCategory = "实用家具";
                                    break;
                                case '5':
                                    this.goodsData[i].showCategory = "零食饮品";
                                    break;
                                case '6':
                                    this.goodsData[i].showCategory = "爱情文学";
                                    break;
                            }
                        }
                        this.goodsLoading = false;
                        this.paginationShow = true;
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            checkGoods(obj) {
                this.checkGoodsDialogVisible = true;
                this.checkGoodsData.id = obj.id;
                this.checkGoodsData.name = obj.name;
                this.checkGoodsData.price = obj.price;
                this.checkGoodsData.images = obj.images;
                this.checkGoodsData.time = obj.time;
                this.checkGoodsData.updated_at = obj.updated_at;
                this.checkGoodsData.user_id = obj.user_id;
                this.checkGoodsData.num = obj.num;
                this.checkGoodsData.showCategory = obj.showCategory;
            }, //查看商品详情对话框
            sendAddGoods() {
                $.ajax({
                    url: '/api/insertGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        name: this.addGoodsFormData.name,
                        price: this.addGoodsFormData.price,
                        images: this.addGoodsFormData.images,
                        num: this.addGoodsFormData.num,
                        user_id: this.addGoodsFormData.user_id,
                        category: this.addGoodsFormData.category
                    }
                })
                    .done(data => {
                        this.$notify({
                            title: '成功',
                            message: '添加成功',
                            type: 'success'
                        });
                        // this.handleShow('2-1')
                        for (let i in this.addGoodsFormData) {
                            this.addGoodsFormData[i] = '';
                        }
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            editGoods(obj) {
                this.$message({
                    message: '您正在修改数据，谨慎行事',
                    type: 'warning'
                });
                this.editGoodsDialogVisible = true;
                this.editGoodsData.id = obj.id;
                this.editGoodsData.name = obj.name;
                this.editGoodsData.price = obj.price;
                this.editGoodsData.images = obj.images;
                this.editGoodsData.num = obj.num;
                this.editGoodsData.user_id = obj.user_id;
                this.editGoodsData.category = obj.category;
            }, //查看编辑商品对话框
            sendEditGoods() {
                this.editGoodsDialogVisible = false;
                $.ajax({
                    url: '/api/updateGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id: this.editGoodsData.id,
                        name: this.editGoodsData.name,
                        price: this.editGoodsData.price,
                        images: this.editGoodsData.images,
                        num: this.editGoodsData.num,
                        category: this.editGoodsData.category,
                        status: 1
                    }
                })
                    .done((data) => {
                        // console.log(data)
                        this.$notify({
                            title: '成功',
                            message: '修改成功',
                            type: 'success'
                        });
                        this.refreshGoods(this.currentPage_cg);
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            deleteGoods(obj) {
                this.deleteGoodsDialogVisible = true;
                this.deleteGoodsID = obj.id;
            }, //查看删除商品表格
            sendDeleteGoods() {
                $.ajax({
                    url: '/api/delectGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id: this.deleteGoodsID
                    }
                })
                    .done((data) => {
                        // console.log(data);
                        this.deleteGoodsDialogVisible = false;
                        this.refreshGoods(this.currentPage_dg)
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            refreshComment() {
                this.goodsData = [];
                this.userData = [];
                this.commentsData = [];
                $.ajax({
                    url: '/api/findAllcommentInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {}
                })
                    .done(data => {
                        // this.commentsData = data.findAllcomment;
                        for (let i in data.findAllcomment) {
                            if (data.findAllcomment[i].pid == 0) {
                                this.commentsData.push(data.findAllcomment[i]);
                            }
                            if (data.findAllcomment[i].pid != 0) {
                                for (let j in this.commentsData) {
                                    if (this.commentsData[j].id == data.findAllcomment[i].pid) {
                                        this.commentsData[j].children = [];
                                        this.commentsData[j].children.push(data.findAllcomment[i]);
                                    }
                                }
                            }
                        }
                        // console.log(this.commentsData)
                        this.userLoading = false;
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            deleteComments(r) {
                // console.log(r)
                this.deleteCommentsDialogVisible = true;
                this.deleteCommentsID = r.id;
            },
            sendDeleteComments() {
                $.ajax({
                    url: '/api/delectCommentInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id: this.deleteCommentsID
                    }
                })
                    .done(data => {
                        // console.log(data)
                        this.deleteCommentsDialogVisible = false;
                        this.refreshComment()
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            checkComments(e) {
                console.log(e);
                this.checkCommentsData = e;
                this.checkCommentsDialogVisible  = true;
            },
            searchUser(serContent) {
                $.ajax({
                    url: '/api/findAllUserInfo/{name}',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        name: serContent
                    }
                })
                    .done(data => {
                        // console.log(data);
                        this.paginationShow = false;
                        this.userData = data.findAllUserByName;
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            searchGood(searchContent) {
                $.ajax({
                    url: '/api/findGoodsByNameInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        name: searchContent
                    }
                })
                    .done(data => {
                        // console.log(data);
                        this.paginationShow = false;
                        this.goodsData = data.findGoodsByid;
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            },
            searchComment(searchContent) {
                $.ajax({
                    url: '/api/findCommentByContentInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        content: searchContent
                    }
                })
                    .done(data => {
                        // console.log(data);
                        this.paginationShow = false;
                        this.commentsData = data.data;
                    })
                    .error(function (data) {
                        console.log('error' + data);
                    })
                    .complete(function (data) {
                        console.log('complete');
                    });
            }
        }
    });
</script>

</html>
<script type="text/javascript" src="/static/jquery.min.js"></script>