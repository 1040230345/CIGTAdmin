<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>广科闲置交易系统-后台</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css" />
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei UI';
            margin: 0;
            padding: 0;
        }
        #app {
            width: 100%;
            height: 100%;
        }
        .el-container {
            height: 722px;
        }
        .el-aside {
            background-color: #545c64;
        }
        .el-header {
            padding-left: 0;
        }
        .el-main {
            padding-left: 0;
        }
        .addUser,
        .editUser,
        .deleteUser {
            width: 100%;
            height: 100%;
        }
        .el-footer {
            padding-left: 0;
            border-top: 1px solid #d2d6de;
            text-align: center;
            line-height: 60px;
        }
        .el-header .el-menu {
            display: flex;
            flex-direction: row-reverse;
        }
    </style>
</head>
<body>
<div id="app">
    <el-container>
        <el-aside width="15%">
            <!--            侧边导航-->
            <el-menu default-active="2" class="el-menu-vertical-demo" @select="handleShow" background-color="#545c64" text-color="#fff" active-text-color="#ffd04b">
                <el-submenu index="1">
                    <template slot="title">
                        <i class="el-icon-user-solid"></i>
                        <span>用户管理</span>
                    </template>
                    <el-menu-item-group><el-menu-item index="1-1">查看用户</el-menu-item></el-menu-item-group>
                    <el-menu-item-group title="----"><el-menu-item index="1-2">增加用户</el-menu-item></el-menu-item-group>
                    <el-menu-item-group title="----"><el-menu-item index="1-3">删除用户</el-menu-item></el-menu-item-group>
                </el-submenu>
                <el-submenu index="2">
                    <template slot="title">
                        <i class="el-icon-s-goods"></i>
                        <span>商品管理</span>
                    </template>
                    <el-menu-item-group><el-menu-item index="2-1">查看商品</el-menu-item></el-menu-item-group>
                    <el-menu-item-group title="----"><el-menu-item index="2-2">增加商品</el-menu-item></el-menu-item-group>
                    <el-menu-item-group title="----"><el-menu-item index="2-3">删除商品</el-menu-item></el-menu-item-group>
                </el-submenu>
                <el-submenu index="3">
                    <template slot="title">
                        <i class="el-icon-s-promotion"></i>
                        <span>动态管理</span>
                    </template>
                    <el-menu-item-group><el-menu-item index="3-1">查看动态</el-menu-item></el-menu-item-group>
                    <el-menu-item-group title="----"><el-menu-item index="3-2">增加动态</el-menu-item></el-menu-item-group>

                    <el-menu-item-group title="----"><el-menu-item index="3-3">删除动态</el-menu-item></el-menu-item-group>
                </el-submenu>
            </el-menu>
        </el-aside>
        <el-container>
            <el-header>
                <!--                头部导航-->
                <el-menu
                        :default-active="activeIndex2"
                        class="el-menu-demo"
                        mode="horizontal"
                        @select="handleSelect"
                        background-color="#545c64"
                        text-color="#fff"
                        active-text-color="#ffd04b"
                >
                    <el-submenu index="2">
                        <template slot="title">
                            个人中心
                        </template>
                        <el-menu-item index="2-1" @click="sendLoginOut">退出登录</el-menu-item>
                        <el-menu-item index="2-2">选项2</el-menu-item>
                        <el-menu-item index="2-3">选项3</el-menu-item>
                    </el-submenu>
                    <el-menu-item index="3" disabled>消息中心</el-menu-item>
                </el-menu>
            </el-header>
            <el-main>
                <!--                查看用户-->
                <div class="editUser" v-if="cardVisible.userShow">
                    <!--                        对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkUserdialogVisible" width="30%" center>
                        <ul>
                            <li>{{ checkUserData.id }}</li>
                            <li>{{ checkUserData.name }}</li>
                            <li>{{ checkUserData.image }}</li>
                            <li>{{ checkUserData.password }}</li>
                            <li>{{ checkUserData.address }}</li>
                            <li>{{ checkUserData.sex }}</li>
                            <li>{{ checkUserData.phone }}</li>
                            <li>{{ checkUserData.information_state }}</li>
                            <li>{{ checkUserData.autograph }}</li>
                            <li>{{ checkUserData.created_at }}</li>
                            <li>{{ checkUserData.updated_at }}</li>
                            <li>{{ checkUserData.real_name }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer"><el-button type="primary" @click="checkUserdialogVisible = false">确 定</el-button></span>
                    </el-dialog>
                    <!--                    编辑-->
                    <el-dialog title="编辑" :visible.sync="editUserdialogVisible" width="30%" center>
                        <el-form label-width="80px" :model="editUserData">
                            <el-form-item label="用户名" :rules="[
                              { required: true, message: '用户名不能为空',trigger:['blur','change']}
                            ]" prop="name">
                                <el-input type="primary" size="small" v-model="editUserData.name"></el-input></el-form-item>
                            <el-form-item label="头像">
                                <el-input type="primary" size="small" v-model="editUserData.image"></el-input></el-form-item>
                            <el-form-item label="密码" :rules="[
                              { required: true, message: '密码不能为空',trigger:['blur','change']}
                            ]" prop="password">
                                <el-input type="primary" size="small" v-model="editUserData.password"></el-input></el-form-item>
                            <el-form-item label="地址">
                                <el-input type="primary" size="small" v-model="editUserData.address"></el-input></el-form-item>
                            <el-form-item label="性别">
                                <el-input type="primary" size="small" v-model="editUserData.sex"></el-input></el-form-item>
                            <el-form-item label="电话">
                                <el-input type="primary" size="small" v-model="editUserData.phone"></el-input></el-form-item>
                            <el-form-item label="状态" :rules="[
                              { required: true, message: '状态不能为空',trigger:['blur','change']}
                            ]" prop="information_state">
                                <el-tooltip class="item" effect="dark" content="状态只能为数字，0为不公开，1为公开" placement="right">
                                <el-input type="primary" size="small" v-model.number="editUserData.information_state"></el-input>
                                </el-tooltip>
                            </el-form-item>
                            <el-form-item label="个性签名">
                                <el-input type="primary" size="small" v-model="editUserData.autograph"></el-input></el-form-item>
                            <el-form-item label="真实姓名">
                                <el-input type="primary" size="small" v-model="editUserData.real_name"></el-input></el-form-item>
                        </el-form>
                        <span slot="footer" class="dialog-footer">
									<el-button type="primary" @click="sendEditUser">修 改</el-button>
									<el-button type="" @click="editUserdialogVisible = false">放弃修改</el-button>
								</span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix header"><div class="title">查看用户</div></div>
                        <div style="margin-bottom: 15px;">
                            <el-table v-loading="userLoading" :data="userData" stripe style="width: 100%">
                                <el-table-column prop="id" label="ID" width="50"></el-table-column>
                                <el-table-column prop="name" label="姓名" width="100"></el-table-column>
                                <el-table-column prop="image" label="头像" width="100"></el-table-column>
                                <el-table-column prop="password" label="密码" width="100"></el-table-column>
                                <el-table-column prop="address" label="地址"></el-table-column>
                                <el-table-column prop="sex" label="性别" width="50"></el-table-column>
                                <el-table-column prop="phone" label="电话"></el-table-column>
                                <el-table-column prop="information_state" label="状态" width="50"></el-table-column>
                                <el-table-column prop="autograph" label="个性签名"></el-table-column>
                                <el-table-column prop="created_at" label="创建时间"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间"></el-table-column>
                                <el-table-column prop="real_name" label="真实姓名"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="100">
                                    <template slot-scope="scope">
                                        <el-button @click="checkUser(scope.row)" type="text" size="small">查看</el-button>
                                        <el-button @click="editUser(scope.row)" type="text" size="small">修改</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <el-pagination background layout="prev, pager, next" :total="100"></el-pagination>
                    </el-card>
                </div>
                <!--                添加用户-->
                <div class="editUser" v-if="cardVisible.addUserShow">
                    <el-card>
                        <div slot="header" class="clearfix header"><div class="title">添加用户</div></div>
                        <div>
                            <el-form :model="addUserFormData" label-width="80px">
                                <el-form-item label="用户名" :rules="[
                              { required: true, message: '用户名不能为空',trigger:['blur','change']}
                            ]" prop="name">
                                    <el-input type="primary" size="large" placeholder="请输入您的姓名" v-model="addUserFormData.name"></el-input></el-form-item>
                                <el-form-item label="头像">
                                    <el-input type="primary" size="large" placeholder="请输入您的头像" v-model="addUserFormData.image"></el-input></el-form-item>
                                <el-form-item label="密码" :rules="[
                              { required: true, message: '密码不能为空',trigger:['blur','change']}
                            ]" prop="password">
                                    <el-input type="primary" size="large" placeholder="请输入您的密码" v-model="addUserFormData.password"></el-input></el-form-item>
                                <el-form-item label="地址">
                                    <el-input type="primary" size="large" placeholder="请输入您的地址" v-model="addUserFormData.address"></el-input></el-form-item>
                                <el-form-item label="性别">
                                    <el-input type="primary" size="large" placeholder="请输入您的性别" v-model="addUserFormData.sex"></el-input></el-form-item>
                                <el-form-item label="电话">
                                    <el-input type="primary" size="large" placeholder="请输入您的电话" v-model="addUserFormData.phone"></el-input></el-form-item>
                                <el-form-item label="状态" :rules="[
                              { required: true, message: '状态不能为空',trigger:['blur','change']}
                            ]" prop="information_state">
                                    <el-tooltip class="item" effect="dark" content="状态只能为数字，0为不公开，1为公开" placement="right">
                                    <el-input type="primary" size="large" placeholder="请输入您的状态" v-model.number="addUserFormData.information_state"></el-input>
                                    </el-tooltip>
                                </el-form-item>
                                <el-form-item label="个性签名">
                                    <el-input type="primary" size="large" placeholder="请输入您的个性签名" v-model="addUserFormData.autograph"></el-input></el-form-item>
                                <el-form-item label="真实姓名">
                                    <el-input type="primary" size="large" placeholder="请输入您的真实姓名" v-model="addUserFormData.real_name"></el-input></el-form-item>
                                <el-button type="primary" @click="sendAddUser">提交</el-button>
                            </el-form>
                        </div>
                    </el-card>
                </div>
                <!--                删除用户-->
                <div class="editUser" v-if="cardVisible.deleteUserShow">
                    <!--                    对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkUserdialogVisible" width="30%" center>
                        <ul>
                            <li>{{ checkUserData.id }}</li>
                            <li>{{ checkUserData.name }}</li>
                            <li>{{ checkUserData.image }}</li>
                            <li>{{ checkUserData.password }}</li>
                            <li>{{ checkUserData.address }}</li>
                            <li>{{ checkUserData.sex }}</li>
                            <li>{{ checkUserData.phone }}</li>
                            <li>{{ checkUserData.information_state }}</li>
                            <li>{{ checkUserData.autograph }}</li>
                            <li>{{ checkUserData.created_at }}</li>
                            <li>{{ checkUserData.updated_at }}</li>
                            <li>{{ checkUserData.real_name }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer"><el-button type="primary" @click="checkUserdialogVisible = false">确 定</el-button></span>
                    </el-dialog>
                    <!--                    删除-->
                    <el-dialog title="确认删除" :visible.sync="deleteUserdialogVisible" width="30%" center>
                        <p>您正在删除表格数据！</p>
                        <span slot="footer" class="dialog-footer">
									<el-button type="primary" @click="sendDeleteUser">确认</el-button>
									<el-button type="" @click="deleteUserdialogVisible = false">取消</el-button>
								</span>
                    </el-dialog>
                    <!--                    表格主体-->
                    <el-card>
                        <div slot="header" class="clearfix header"><div class="title">删除用户</div></div>
                        <div style="margin-bottom: 15px;">
                            <el-table :data="userData" stripe style="width: 100%">
                                <el-table-column prop="id" label="ID"></el-table-column>
                                <el-table-column prop="name" label="姓名"></el-table-column>
                                <el-table-column prop="image" label="头像"></el-table-column>
                                <el-table-column prop="password" label="密码"></el-table-column>
                                <el-table-column prop="address" label="地址"></el-table-column>
                                <el-table-column prop="sex" label="性别"></el-table-column>
                                <el-table-column prop="phone" label="电话"></el-table-column>
                                <el-table-column prop="information_state" label="状态"></el-table-column>
                                <el-table-column prop="autograph" label="个性签名"></el-table-column>
                                <el-table-column prop="created_at" label="创建时间" width="170px"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="170px"></el-table-column>
                                <el-table-column prop="real_name" label="真实姓名"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="100">
                                    <template slot-scope="scope">
                                        <el-button @click="checkUser(scope.row)" type="text" size="small">查看</el-button>
                                        <el-button @click="deleteUser(scope.row)" type="text" size="small">删除</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <el-pagination background layout="prev, pager, next" :total="100"></el-pagination>
                    </el-card>
                </div>

                <!--                查看商品-->
                <div class="editUser" v-if="cardVisible.goodsShow">
                    <!--                        对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkGoodsDialogVisible" width="30%" center>
                        <ul>
                            <li>{{ checkGoodsData.id }}</li>
                            <li>{{ checkGoodsData.name }}</li>
                            <li>{{ checkGoodsData.price }}</li>
                            <li>{{ checkGoodsData.images }}</li>
                            <li>{{ checkGoodsData.time }}</li>
                            <li>{{ checkGoodsData.updated_at }}</li>
                            <li>{{ checkGoodsData.user_id }}</li>
                            <li>{{ checkGoodsData.num }}</li>
                            <li>{{ checkGoodsData.category }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer"><el-button type="primary" @click="checkGoodsDialogVisible = false">确 定</el-button></span>
                    </el-dialog>
                    <!--                    编辑-->
                    <el-dialog title="编辑" :visible.sync="editGoodsDialogVisible" width="30%" center>
                        <el-form label-width="80px">
                            <el-form-item label="商品名称"><el-input type="primary" size="small" v-model="editGoodsData.name"></el-input></el-form-item>
                            <el-form-item label="价格"><el-input type="primary" size="small" v-model="editGoodsData.price"></el-input></el-form-item>
                            <el-form-item label="图片"><el-input type="primary" size="small" v-model="editGoodsData.images"></el-input></el-form-item>
                            <el-form-item label="数量"><el-input type="primary" size="small" v-model="editGoodsData.num"></el-input></el-form-item>
                            <el-form-item label="类别"><el-input type="primary" size="small" v-model="editGoodsData.category"></el-input></el-form-item>
                        </el-form>
                        <span slot="footer" class="dialog-footer">
									<el-button type="primary" @click="sendEditGoods">修 改</el-button>
									<el-button type="" @click="editGoodsDialogVisible = false">放弃修改</el-button>
								</span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix header"><div class="title">查看商品</div></div>
                        <div style="margin-bottom: 15px;">
                            <el-table v-loading="goodsLoading" :data="goodsData" stripe style="width: 100%">
                                <el-table-column prop="id" label="ID" width="50"></el-table-column>
                                <el-table-column prop="name" label="名称" width="150"></el-table-column>
                                <el-table-column prop="price" label="价格" width="80"></el-table-column>
                                <el-table-column prop="images" label="图片" width="100"></el-table-column>
                                <el-table-column prop="time" label="时间" width="100"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="100"></el-table-column>
                                <el-table-column prop="user_id" label="用户id" width="80"></el-table-column>
                                <el-table-column prop="num" label="数量" width="60"></el-table-column>
                                <el-table-column prop="category" label="类别" width="100"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="100">
                                    <template slot-scope="scope">
                                        <el-button @click="checkGoods(scope.row)" type="text" size="small">查看</el-button>
                                        <el-button @click="editGoods(scope.row)" type="text" size="small">修改</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <el-pagination background layout="prev, pager, next" :total="100"></el-pagination>
                    </el-card>
                </div>
                <!--                添加商品-->
                <div class="editUser" v-if="cardVisible.addGoodsShow">
                    <el-card>
                        <div slot="header" class="clearfix header"><div class="title">添加商品</div></div>
                        <div>
                            <el-form :model="addGoodsFormData" label-width="80px">
                                <el-form-item label="用户id">
                                    <el-input type="primary" size="large" placeholder="请输入用户id" v-model="addGoodsFormData.user_id"></el-input>
                                </el-form-item>
                                <el-form-item label="商品名称">
                                    <el-input type="primary" size="large" placeholder="请输入您要发布商品名称" v-model="addGoodsFormData.name"></el-input>
                                </el-form-item>
                                <el-form-item label="价格">
                                    <el-input type="primary" size="large" placeholder="请输入您的商品价格" v-model="addGoodsFormData.price"></el-input>
                                </el-form-item>
                                <el-form-item label="图片">
                                    <el-input type="primary" size="large" placeholder="请输入您的商品图片" v-model="addGoodsFormData.images"></el-input>
                                </el-form-item>
                                <el-form-item label="数量">
                                    <el-input type="primary" size="large" placeholder="请输入您的商品数量" v-model="addGoodsFormData.num"></el-input>
                                </el-form-item>
                                <el-form-item label="类别">
                                    <el-input type="primary" size="large" placeholder="请输入您的商品类别" v-model="addGoodsFormData.category"></el-input>
                                </el-form-item>
                                <el-button type="primary" @click="sendAddGoods">提交</el-button>
                            </el-form>
                        </div>
                    </el-card>
                </div>
                <!--                删除商品-->
                <div class="editUser" v-if="cardVisible.deleteGoodsShow">
                    <!--                    对话框-->
                    <!--                    查看详情-->
                    <el-dialog title="详情" :visible.sync="checkGoodsDialogVisible" width="30%" center>
                        <ul>
                            <li>{{ checkGoodsData.id }}</li>
                            <li>{{ checkGoodsData.name }}</li>
                            <li>{{ checkGoodsData.price }}</li>
                            <li>{{ checkGoodsData.images }}</li>
                            <li>{{ checkGoodsData.time }}</li>
                            <li>{{ checkGoodsData.updated_at }}</li>
                            <li>{{ checkGoodsData.user_id }}</li>
                            <li>{{ checkGoodsData.num }}</li>
                            <li>{{ checkGoodsData.category }}</li>
                        </ul>
                        <span slot="footer" class="dialog-footer"><el-button type="primary" @click="checkGoodsDialogVisible = false">确 定</el-button></span>
                    </el-dialog>
                    <!--                    删除-->
                    <el-dialog title="确认删除" :visible.sync="deleteGoodsDialogVisible" width="30%" center>
                        <p>您正在删除表格数据！</p>
                        <span slot="footer" class="dialog-footer">
									<el-button type="primary" @click="sendDeleteGoods">确认</el-button>
									<el-button type="" @click="deleteGoodsDialogVisible = false">取消</el-button>
								</span>
                    </el-dialog>
                    <el-card>
                        <div slot="header" class="clearfix header"><div class="title">删除商品</div></div>
                        <div style="margin-bottom: 15px;">
                            <el-table :data="goodsData" stripe style="width: 100%">
                                <el-table-column prop="id" label="ID" width="50"></el-table-column>
                                <el-table-column prop="name" label="名称" width="150"></el-table-column>
                                <el-table-column prop="price" label="价格" width="80"></el-table-column>
                                <el-table-column prop="images" label="图片" width="100"></el-table-column>
                                <el-table-column prop="time" label="时间" width="100"></el-table-column>
                                <el-table-column prop="updated_at" label="更新时间" width="100"></el-table-column>
                                <el-table-column prop="user_id" label="用户id" width="80"></el-table-column>
                                <el-table-column prop="num" label="数量" width="60"></el-table-column>
                                <el-table-column prop="category" label="类别" width="100"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="100">
                                    <template slot-scope="scope">
                                        <el-button @click="checkGoods(scope.row)" type="text" size="small">查看</el-button>
                                        <el-button @click="deleteGoods(scope.row)" type="text" size="small">删除</el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                        </div>
                        <!--                        分页-->
                        <el-pagination background layout="prev, pager, next" :total="100"></el-pagination>
                    </el-card>
                </div>

            </el-main>
            <el-footer>
                ©
                <i style="font-weight: 700; font-style: normal;color: #3C8DBC">广东科技学院</i>
                2019
            </el-footer>
        </el-container>
    </el-container>
</div>
</body>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            mode: 'vertical',
            activeIndex2: '1',
            checkUserdialogVisible: false,
            editUserdialogVisible: false,
            deleteUserdialogVisible: false,

            checkGoodsDialogVisible: false,
            editGoodsDialogVisible: false,
            deleteGoodsDialogVisible: false,
            cardVisible: {
                userShow: false,
                addUserShow: false,
                deleteUserShow: false,
                goodsShow: false,
                addGoodsShow: false,
                deleteGoodsShow: false
            },
            // user
            userLoading: true,
                //暂时存放删除id
                deleteID:'',
            checkUserData: {
                id: '',
                name: '',
                image: '',
                password: '',
                address: '',
                sex: '',
                phone: '',
                information_state: '',
                autograph: '',
                created_at: '',
                updated_at: '',
                real_name: ''
            },
            editUserData: {
                id: '',
                name: '',
                image: '',
                password: '',
                address: '',
                sex: '',
                phone: '',
                information_state: '',
                autograph: '',
                created_at: '',
                updated_at: '',
                real_name: ''
            },
            userData: [
                {
                    id: '1',
                    name: 'xxx',
                    image: 'tup',
                    password: '123',
                    address: 'adad',
                    sex: 'dsa',
                    phone: 'dsa',
                    information_state: 'das',
                    autograph: 'das',
                    created_at: 'das',
                    updated_at: 'das',
                    real_name: 'das'
                }
            ],
            addUserFormData: {
                name: '',
                image: '',
                password: '',
                address: '',
                sex: '',
                phone: '',
                information_state: '',
                autograph: '',
                real_name: ''
            },
            // 商品
            goodsLoading: true,
                //暂时存放删除id
                deleteGoodsID:'',
            checkGoodsData: {
                id: '',
                name: '',
                price: '',
                images: '',
                time: '',
                updated_at: '',
                user_id: '',
                num: '',
                category: ''
            },
            editGoodsData: {
                id: '',
                name: '',
                price: '',
                images: '',
                time: '',
                updated_at: '',
                user_id: '',
                num: '',
                category: ''
            },
            goodsData: [
                {
                    id: '1',
                    name: 'AJ1 HighOG 小闪电',
                    price: '9999',
                    images: 'xxx',
                    time: 'xxx',
                    updated_at: 'xxxx',
                    user_id: 'xxx',
                    num: '1',
                    category: '鞋子'
                }
            ],
            addGoodsFormData: {
                name: '',
                price: '',
                images: '',
                user_id: '',
                num: '',
                category: ''
            }
        },
        watch: {
            'cardVisible.userShow': function(e) {
                this.refreshUser()
            },
            'cardVisible.deleteUserShow': function(e) {
                this.refreshUser()
            },
            'cardVisible.goodsShow': function(e) {
                this.refreshGoods()
            },
            'cardVisible.deleteGoodsShow': function(e) {
                this.refreshGoods()
            }
        },
        methods: {
            handleSelect(key, keyPath) {},
            handleShow(key, keyPath) {
                console.log(key);

                for (i in this.cardVisible) {
                    this.cardVisible[i] = false;
                }

                switch (key) {
                    case '1-1':
                        this.cardVisible.userShow = true;
                        break;
                    case '1-2':
                        this.cardVisible.addUserShow = true;
                        break;
                    case '1-3':
                        this.cardVisible.deleteUserShow = true;
                        break;
                    case '2-1':
                        this.cardVisible.goodsShow = true;
                        break;
                    case '2-2':
                        this.cardVisible.addGoodsShow = true;
                        break;
                    case '2-3':
                        this.cardVisible.deleteGoodsShow = true;
                        break;
                }
            },
            //退出登录
            sendLoginOut(){
                window.location.replace('/loginout');
            },
            // 用户
            // 更新用户数据
            refreshUser(){
                $.ajax({
                    url: '/api/findAllUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {}
                })
                    .done(data => {
                        this.userData = [];
                        for (index in data.findAllUser) {
                            this.userData.push(data.findAllUser[index]);
                        }
                        this.userLoading = false;
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            checkUser(obj) {
                this.checkUserdialogVisible = true;
                this.checkUserData.id = obj.id;
                this.checkUserData.name = obj.name;
                this.checkUserData.image = obj.image;
                this.checkUserData.password = obj.password;
                this.checkUserData.address = obj.address;
                this.checkUserData.sex = obj.sex;
                this.checkUserData.phone = obj.phone;
                this.checkUserData.information_state = obj.information_state;
                this.checkUserData.autograph = obj.autograph;
                this.checkUserData.created_at = obj.created_at;
                this.checkUserData.updated_at = obj.updated_at;
                this.checkUserData.real_name = obj.real_name;
            },//查看用户详情对话框
            sendAddUser(){
                $.ajax({
                    url: '/api/insertUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        name:this.addUserFormData.name,
                        image:this.addUserFormData.image,
                        password:this.addUserFormData.password,
                        address:this.addUserFormData.address,
                        sex:this.addUserFormData.sex,
                        phone:this.addUserFormData.phone,
                        information_state:this.addUserFormData.information_state,
                        autograph:this.addUserFormData.autograph,
                        real_name:this.addUserFormData.real_name
                    }
                })
                    .done(data => {
                        this.$notify({
                            title: '成功',
                            message: '添加成功',
                            type: 'success'
                        });
                        this.handleShow('1-1')
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            editUser(obj) {
                this.$message({
                    message: '您正在修改数据，谨慎行事',
                    type: 'warning'
                });
                this.editUserdialogVisible = true;
                this.editUserData.id = obj.id;
                this.editUserData.name = obj.name;
                this.editUserData.image = obj.image;
                this.editUserData.password = obj.password;
                this.editUserData.address = obj.address;
                this.editUserData.sex = obj.sex;
                this.editUserData.phone = obj.phone;
                this.editUserData.information_state = obj.information_state;
                this.editUserData.autograph = obj.autograph;
                this.editUserData.created_at = obj.created_at;
                this.editUserData.updated_at = obj.updated_at;
                this.editUserData.real_name = obj.real_name;
            },//查看编辑用户对话框
            sendEditUser(){
                this.editUserdialogVisible = false;
                $.ajax({
                    url: '/api/updateUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id:this.editUserData.id,
                        name:this.editUserData.name,
                        image:this.editUserData.image,
                        password:this.editUserData.password,
                        address:this.editUserData.address,
                        sex:this.editUserData.sex,
                        phone:this.editUserData.phone,
                        information_state:this.editUserData.information_state,
                        autograph:this.editUserData.autograph,
                        real_name:this.editUserData.real_name
                    }
                })
                    .done((data) => {
                        console.log(data)
                        this.$notify({
                            title: '成功',
                            message: '修改成功',
                            type: 'success'
                        });
                        this.refreshUser()
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            deleteUser(obj) {
                this.deleteUserdialogVisible = true;
                this.deleteID=obj.id;
            },//查看删除用户表格
            sendDeleteUser(){
                $.ajax({
                    url: '/api/delectUserInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id:this.deleteID
                    }
                })
                    .done((data) => {
                        console.log(data);
                        this.deleteUserdialogVisible = false;
                        this.refreshUser()
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            // 商品
            refreshGoods(){
                $.ajax({
                    url: '/api/findAllGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {}
                })
                    .done(data => {
                        this.goodsData = [];
                        for (index in data.findAllGoods) {
                            this.goodsData.push(data.findAllGoods[index]);
                        }
                        this.goodsLoading = false;
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            checkGoods(obj) {
                this.checkGoodsDialogVisible = true;
                this.checkGoodsData.id = obj.id;
                this.checkGoodsData.name = obj.name;
                this.checkGoodsData.price = obj.price;
                this.checkGoodsData.images = obj.images;
                this.checkGoodsData.time = obj.time;
                this.checkGoodsData.updated_at = obj.updated_at;
                this.checkGoodsData.user_id = obj.user_id;
                this.checkGoodsData.num = obj.num;
                this.checkGoodsData.category = obj.category;
                console.log(obj)
            },//查看商品详情对话框
            sendAddGoods(){
                $.ajax({
                    url: '/api/insertGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        name:this.addGoodsFormData.name,
                        price:this.addGoodsFormData.price,
                        images:this.addGoodsFormData.images,
                        num:this.addGoodsFormData.num,
                        user_id:this.addGoodsFormData.user_id,
                        category:this.addGoodsFormData.category
                    }
                })
                    .done(data => {
                        this.$notify({
                            title: '成功',
                            message: '添加成功',
                            type: 'success'
                        });
                        this.handleShow('2-1')
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            editGoods(obj) {
                this.$message({
                    message: '您正在修改数据，谨慎行事',
                    type: 'warning'
                });
                this.editGoodsDialogVisible = true;
                this.editGoodsData.id = obj.id;
                this.editGoodsData.name = obj.name;
                this.editGoodsData.price = obj.price;
                this.editGoodsData.images = obj.images;
                this.editGoodsData.num = obj.num;
                this.editGoodsData.user_id = obj.user_id;
                this.editGoodsData.category = obj.category;
            },//查看编辑商品对话框
            sendEditGoods(){
                this.editGoodsDialogVisible = false;
                $.ajax({
                    url: '/api/updateGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id:this.editGoodsData.id,
                        name:this.editGoodsData.name,
                        price:this.editGoodsData.price,
                        images:this.editGoodsData.images,
                        num:this.editGoodsData.num,
                        category:this.editGoodsData.category
                    }
                })
                    .done((data) => {
                        console.log(data)
                        this.$notify({
                            title: '成功',
                            message: '修改成功',
                            type: 'success'
                        });
                        this.refreshGoods()
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
            deleteGoods(obj) {
                this.deleteGoodsDialogVisible = true;
                this.deleteGoodsID=obj.id;
            },//查看删除商品表格
            sendDeleteGoods(){
                $.ajax({
                    url: '/api/delectGoodsInfo',
                    method: 'POST',
                    dataType: 'JSON',
                    data: {
                        id:this.deleteGoodsID
                    }
                })
                    .done((data) => {
                        console.log(data);
                        this.deleteGoodsDialogVisible = false;
                        this.refreshGoods()
                    })
                    .error(function(data) {
                        console.log('error' + data);
                    })
                    .complete(function(data) {
                        console.log('complete');
                    });
            },
        }
    });
</script>
</html>
